<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <title>SongSAT by Team Salinity</title>
    <link rel="icon" type="image/png" href="images/favicon.png" />
    <link rel="stylesheet" href="styles/universal.css">
    <link rel="stylesheet" href="styles/demo.css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css">

    <script src="scripts/audiocontrols.js"></script>
</head>

<body>
    <div class="map-container">
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Welcome to SongSAT demo!</strong> Explore the map and click on any of the location markers to hear a
            sample output!
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div id="map"></div>
        <div class="text-center mt-3 mb-4">
            <h5>Master Audio Controls</h5>
            <div class="btn-group" role="group" aria-label="Basic example">
                <button id="audio-pause" onclick="pauseAudio();" type="button" class="btn btn-secondary"><i
                        id="btn-pause" class="fas fa-pause"></i></button>
                <button id="audio-stop" onclick="stopAudio();" type="button" class="btn btn-secondary"><i
                        class="fas fa-stop"></i></button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="landsatModal" tabindex="-1" role="dialog" aria-labelledby="landsatModalLabel">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="landsatModalLabel"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div id="modal-img"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
    <script src="scripts/leaflet.ajax.min.js"></script>
    <!--<script>
        function popUp(feature, layer) {
            layer.bindPopup('<a id="landsatimg" href="#landsatModal" data-toggle="modal" data-img-url="images/landsat/' + feature.properties.imgname + '"><img class="img-points" src="images/landsat/' + feature.properties.imgname + '" alt="' + feature.properties.name + '"></a><br><b>Location:</b> ' + feature.properties.name + "<br><b>Classification:</b> " + feature.properties.classification);
        }

        var points = new L.GeoJSON.AJAX("data/points.geojson", { onEachFeature: popUp });

        points.on('click', function (e) { playAudio(e.layer.feature.properties.audiolink) });

        var colourmap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: US National Park Service, <a href="https://github.com/calvinmetcalf/leaflet-ajax" target="_blank">Leaflet Ajax</a>',
            id: 'songsatmap',
            noWrap: true, maxZoom: 8, minZoom: 2
        });

        var baseMaps = {
            "Colour": colourmap
        }

        var songsatmap = L.map('map', {
            center: [44.0, 0],
            zoom: 2,
            layers: [colourmap, points]
        });

        $(document).on("click", "#landsatimg", function (feature, layer) {
            document.getElementById('landsatModalLabel').innerHTML = feature.currentTarget.firstChild.attributes.alt.textContent;
            document.getElementById('modal-img').innerHTML = '<img class="img-fluid" src="' + feature.currentTarget.dataset.imgUrl + '">';
        });
    </script>-->
    <script src="scripts/songsatmap.js"></script>
</body>

</html>